# ChatLLM - æ™ºèƒ½æ–‡æ¡£é—®ç­”ç³»ç»Ÿ

ChatLLM æ˜¯ä¸€ä¸ªå…¨æ ˆçš„ RAG (Retrieval-Augmented Generation) åº”ç”¨ç¨‹åºï¼Œå…è®¸ç”¨æˆ·ä¸Šä¼ æ–‡æ¡£ï¼ˆå¦‚ PDFï¼‰å¹¶åŸºäºæ–‡æ¡£å†…å®¹è¿›è¡Œæ™ºèƒ½å¯¹è¯ã€‚é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„æŠ€æœ¯æ ˆï¼Œå‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œç»“åˆäº†é«˜æ€§èƒ½çš„å‘é‡æ£€ç´¢æœåŠ¡ã€‚

## ğŸŒŸ é¡¹ç›®äº®ç‚¹

- **æ™ºèƒ½é—®ç­” (RAG)**: åŸºäº LangChain å’Œ OpenAI å®ç°çš„æ–‡æ¡£æ£€ç´¢å¢å¼ºç”Ÿæˆï¼Œæ”¯æŒç²¾å‡†çš„ä¸Šä¸‹æ–‡é—®ç­”ã€‚
- **æ–‡æ¡£å¤„ç†**: æ”¯æŒ PDF æ–‡æ¡£ä¸Šä¼ ã€è§£æã€åˆ†å—åŠå‘é‡åŒ–å­˜å‚¨ã€‚
- **æµå¼å“åº”**: ç±»ä¼¼ ChatGPT çš„æ‰“å­—æœºæ•ˆæœï¼Œå®æ—¶æµå¼è¾“å‡º AI å›å¤ã€‚
- **ç°ä»£åŒ–å‰ç«¯**: åŸºäº React 19 + Vite + TailwindCSS v4 æ„å»ºï¼Œå“åº”å¼è®¾è®¡ï¼Œæ”¯æŒ PWAã€‚
- **é«˜æ€§èƒ½åç«¯**: Node.js (Express) å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼ŒPython (FastAPI) å¤„ç† AI/RAG æ ¸å¿ƒä»»åŠ¡ã€‚
- **å‘é‡æ•°æ®åº“**: ä½¿ç”¨ Supabase (PostgreSQL + pgvector) å­˜å‚¨å’Œæ£€ç´¢é«˜ç»´å‘é‡æ•°æ®ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

é¡¹ç›®åŒ…å«ä¸‰ä¸ªä¸»è¦æœåŠ¡ï¼š

1.  **Client (`/client`)**: ç”¨æˆ·ç•Œé¢ï¼Œè´Ÿè´£èŠå¤©äº¤äº’ã€æ–‡ä»¶ä¸Šä¼ å’Œæ¸²æŸ“ Markdownã€‚
2.  **Server (`/server`)**: ä¸šåŠ¡ç½‘å…³ï¼Œå¤„ç†é‰´æƒã€æ–‡ä»¶å­˜å‚¨ã€èŠå¤©å†å²è®°å½•ï¼Œå¹¶è½¬å‘ RAG è¯·æ±‚ã€‚
3.  **RAG Service (`/rag-service`)**: æ ¸å¿ƒ AI æœåŠ¡ï¼Œè´Ÿè´£æ–‡æ¡£åµŒå…¥ (Embedding) å’Œå‘é‡æ£€ç´¢ (Retrieval)ã€‚

```mermaid
graph TD
    User[ç”¨æˆ·] --> Client
    Client -- HTTP/REST --> Server
    Server -- é‰´æƒ/ä¸šåŠ¡é€»è¾‘ --> Database[(Supabase)]
    Server -- æ£€ç´¢è¯·æ±‚ --> RAG_Service
    RAG_Service -- å‘é‡æŸ¥è¯¢ --> Database
    RAG_Service -- LLMè¯·æ±‚ --> OpenAI
```

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯ (Client)
- **æ¡†æ¶**: React 19, Vite 6
- **è¯­è¨€**: TypeScript
- **çŠ¶æ€ç®¡ç†**: Zustand
- **UI ç»„ä»¶**: Radix UI, Lucide React
- **æ ·å¼**: TailwindCSS v4
- **Markdown**: react-markdown, react-syntax-highlighter
- **HTTP**: Axios

### åç«¯ (Server)
- **è¿è¡Œç¯å¢ƒ**: Node.js
- **æ¡†æ¶**: Express v5
- **æ•°æ®åº“**: Supabase (PostgreSQL)
- **ORM/Query**: Supabase JS Client, Prisma (å¯é€‰)
- **è®¤è¯**: JWT (JSON Web Tokens)
- **æ–‡ä»¶å¤„ç†**: Multer, pdf-parse

### AI æœåŠ¡ (RAG Service)
- **è¯­è¨€**: Python 3.10+
- **æ¡†æ¶**: FastAPI
- **AI/LLM**: LangChain, OpenAI API
- **å‘é‡åº“**: Supabase (pgvector)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡
ç¡®ä¿ä½ çš„æœ¬åœ°ç¯å¢ƒå·²å®‰è£…ï¼š
- Node.js (v18+)
- Python (v3.10+)
- PostgreSQL (æˆ–ç›´æ¥ä½¿ç”¨ Supabase è´¦å·)

### 2. æ•°æ®åº“è®¾ç½® (Supabase)
1.  åˆ›å»ºä¸€ä¸ª Supabase é¡¹ç›®ã€‚
2.  åœ¨ SQL ç¼–è¾‘å™¨ä¸­å¯ç”¨ `vector` æ‰©å±•ï¼š
    ```sql
    create extension if not exists vector;
    ```
3.  è¿è¡Œé¡¹ç›®ä¸­çš„è¿ç§»è„šæœ¬ï¼ˆå¦‚æœ‰ï¼‰ï¼Œç¡®ä¿åˆ›å»ºäº† `documents`, `messages`, `users` ç­‰è¡¨ï¼Œä»¥åŠå‘é‡ç´¢å¼•ã€‚
    *   å‚è€ƒ `server/migrations/optimize_indexes.sql` è¿›è¡Œç´¢å¼•ä¼˜åŒ–ã€‚

### 3. åç«¯æœåŠ¡ (Server)
```bash
cd server
npm install

# é…ç½®ç¯å¢ƒå˜é‡
# å¤åˆ¶ .env.example (å¦‚æœå­˜åœ¨) æˆ–æ–°å»º .env æ–‡ä»¶
# å¡«å†™: PORT=3000, SUPABASE_URL, SUPABASE_KEY, JWT_SECRET, OPENAI_API_KEY
```
å¯åŠ¨æœåŠ¡ï¼š
```bash
npm run dev
```

### 4. RAG æœåŠ¡ (Python)
```bash
cd rag-service

# åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python -m venv .venv
# Windows:
..\.venv\Scripts\Activate.ps1
# Linux/Mac:
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# é…ç½®ç¯å¢ƒå˜é‡ (.env)
# å¡«å†™: PORT=8000, OPENAI_API_KEY, SUPABASE_URL, SUPABASE_KEY
```
å¯åŠ¨æœåŠ¡ï¼š
```bash
python main.py
```

### 5. å‰ç«¯é¡¹ç›® (Client)
```bash
cd client
npm install

# é…ç½®ç¯å¢ƒå˜é‡ (.env)
# å¡«å†™: VITE_API_URL=http://localhost:3000
```
å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
```bash
npm run dev
```

## ğŸ“ ç¯å¢ƒå˜é‡è¯´æ˜

å»ºè®®åœ¨å„ç›®å½•ä¸‹åˆ›å»º `.env` æ–‡ä»¶ï¼š

**Server (`server/.env`)**
```env
PORT=3000
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_anon_key
SERVICE_ROLE_KEY=your_service_role_key
JWT_SECRET=your_jwt_secret
OPENAI_API_KEY=sk-...
```

**RAG Service (`rag-service/.env`)**
```env
PORT=8000
OPENAI_API_KEY=sk-...
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
```

**Client (`client/.env`)**
```env
VITE_API_URL=http://localhost:3000/api
```

## ğŸ“‚ ç›®å½•ç»“æ„

```
chatLLM/
â”œâ”€â”€ client/          # React å‰ç«¯åº”ç”¨
â”œâ”€â”€ server/          # Node.js åç«¯åº”ç”¨
â”œâ”€â”€ rag-service/     # Python RAG å¾®æœåŠ¡
â””â”€â”€ README.md        # é¡¹ç›®æ–‡æ¡£
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æäº¤ Pull Request

## ğŸ“„ è®¸å¯è¯

[MIT](LICENSE)
